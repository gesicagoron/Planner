{% extends "login/base.html" %}
{% block content %}
  <article class="media content-section">
    <img class="rounded-circle article-img" src="{{ object.author.profile.image.url }}">
    <div class="media-body">
      <div class="article-metadata">
        <a class="mr-2" href="#">{{ object.author }}</a>
        <small class="text-muted">{{ object.date_posted|date:"F d, Y" }}</small>
        {% if object.author == user %}
          <div>
            <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{% url 'post-update' object.id %}">Update</a>
            <a class="btn btn-danger btn-sm mt-1 mb-1" href="{% url 'post-delete' object.id %}">Delete</a>
          </div>
        {% endif %}
      </div>
      <h2 class="article-title">{{ object.title }}</h2>
      <p class="article-content">{{ object.content }}</p>
       <!-- Display likes -->
       <form method="POST" action="{% url 'like-post' pk=post.pk %}">
        {% csrf_token %}
        <button type="submit" style="background-color:transparent" class="btn {% if request.user in post.likes.all %}text-danger{% endif %}">
          {% if request.user in post.likes.all %}
            ‚ù§Ô∏è
          {% else %}
            üñ§
          {% endif %}
          {{ like_count }}
        </button>
      </form>
 <!-- Display comments -->
 <h3>Comments:</h3>
 {% for comment in comments %}
   <div class="comment">
     <p>{{ comment.author.username }} - {{ comment.date_posted|date:"F d, Y" }}</p>
     <p>{{ comment.content }}</p>
     
     {% if comment.author == user %}
       <a href="{% url 'comment-delete' comment.pk %}" class="btn btn-danger btn-sm" onclick="return confirmDelete()">Delete</a>
     {% endif %}
   </div>
 {% endfor %}

 <!-- Form for adding new comments -->
 <form method="POST" action="{% url 'comment-create' pk=post.pk %}">
   {% csrf_token %}
   <textarea name="content" rows="4" cols="50"></textarea><br>
   <input type="submit" value="Add Comment">
 </form>
</article>

<script>
 function confirmDelete() {
   return confirm("Are you sure you want to delete this comment?");
 }
</script>
{% endblock %}